<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Deploy Hugo on Github Pages with GitHub Actions | Saeed's Blog</title><meta name=keywords content><meta name=description content="For the start, you will require two repositories: one to store your Hugo project, and the other to host the GitHub page with the static files generated by Hugo.
Configuring GitHub Pages GitHub Pages is a straightforward solution for hosting a static website. You can find more information on how to set up your GitHub Pages in the relevant documentation.
To give GitHub Actions permission to write to your GitHub Pages repository, you will need to create a secret key pair."><meta name=author content="Saeed"><link rel=canonical href=https://keyboardsmash.dev/posts/deploy-hugo-into-github-pages/><link href=/assets/css/stylesheet.min.8d754ccb970fef4a6d8e5b0441e01d76a0d3530c6777067a1b2ca581aa1b4af7.css integrity="sha256-jXVMy5cP70ptjlsEQeAddqDTUwxndwZ6GyylgaobSvc=" rel="preload stylesheet" as=style><link rel=icon href=https://keyboardsmash.dev/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://keyboardsmash.dev/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://keyboardsmash.dev/favicon-32x32.png><link rel=apple-touch-icon href=https://keyboardsmash.dev/apple-touch-icon.png><link rel=mask-icon href=https://keyboardsmash.dev/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.101.0"><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-168254523-1","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script><meta property="og:title" content="Deploy Hugo on Github Pages with GitHub Actions"><meta property="og:description" content="For the start, you will require two repositories: one to store your Hugo project, and the other to host the GitHub page with the static files generated by Hugo.
Configuring GitHub Pages GitHub Pages is a straightforward solution for hosting a static website. You can find more information on how to set up your GitHub Pages in the relevant documentation.
To give GitHub Actions permission to write to your GitHub Pages repository, you will need to create a secret key pair."><meta property="og:type" content="article"><meta property="og:url" content="https://keyboardsmash.dev/posts/deploy-hugo-into-github-pages/"><meta property="article:published_time" content="2023-02-07T14:30:15+01:00"><meta property="article:modified_time" content="2023-02-07T14:30:15+01:00"><meta property="og:site_name" content="Saeed's blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="Deploy Hugo on Github Pages with GitHub Actions"><meta name=twitter:description content="For the start, you will require two repositories: one to store your Hugo project, and the other to host the GitHub page with the static files generated by Hugo.
Configuring GitHub Pages GitHub Pages is a straightforward solution for hosting a static website. You can find more information on how to set up your GitHub Pages in the relevant documentation.
To give GitHub Actions permission to write to your GitHub Pages repository, you will need to create a secret key pair."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://keyboardsmash.dev/posts/"},{"@type":"ListItem","position":3,"name":"Deploy Hugo on Github Pages with GitHub Actions","item":"https://keyboardsmash.dev/posts/deploy-hugo-into-github-pages/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Deploy Hugo on Github Pages with GitHub Actions","name":"Deploy Hugo on Github Pages with GitHub Actions","description":"For the start, you will require two repositories: one to store your Hugo project, and the other to host the GitHub page with the static files generated by Hugo.\nConfiguring GitHub …","keywords":[],"articleBody":"For the start, you will require two repositories: one to store your Hugo project, and the other to host the GitHub page with the static files generated by Hugo.\nConfiguring GitHub Pages GitHub Pages is a straightforward solution for hosting a static website. You can find more information on how to set up your GitHub Pages in the relevant documentation.\nTo give GitHub Actions permission to write to your GitHub Pages repository, you will need to create a secret key pair. Run the following command in your terminal:\nssh-keygen -t rsa -b 4096 -C \"$(git config user.email)\" -f gh-pages -N \"\" This will generate two files, gh-pages and gh-pages.pub, in your current directory.\nNext, navigate to the settings in your GitHub Pages repository, select Deploy keys, and add a new deploy key. Copy and paste the contents of the gh-pages file generated in the previous step into the new key, and save it. The GitHub Pages repository does not require any further configuration unless you want to confirm that your website is available before proceeding to the next step.\nConfig Hugo repository In your repo that you keep your Hugo project, open the settings and from the sidebar select Secret and Variables -\u003e Actions and add a new secret key. this time copy and past the content of gh-pages.pub and give it a name. Remember what name you’re giving it because we need it for the next step. I chose ACTION_DEPLY_KEY.\nNow we create a file under .github/workflow/hugo.yaml and add the following content into it:\nname: GitHub Pages on: push: branches: - master # Set a branch name to trigger deployment pull_request: jobs: deploy: runs-on: ubuntu-22.04 permissions: contents: write concurrency: group: ${{ github.workflow }}-${{ github.ref }} steps: - uses: actions/checkout@v3 with: submodules: true # Fetch Hugo themes (true OR recursive) fetch-depth: 0 # Fetch all history for .GitInfo and .Lastmod - name: Setup Hugo uses: peaceiris/actions-hugo@v2 with: hugo-version: '0.101.0' - name: Build run: hugo --minify \u0026\u0026 echo \"keyboardsmash.dev\" \u003e public/CNAME - name: Deploy uses: peaceiris/actions-gh-pages@v3 with: deploy_key: ${{ secrets.ACTIONS_DEPLOY_KEY }} external_repository: smoqadam/keyboardsmash.github.io publish_branch: main # default: gh-pages publish_dir: ./public There are several key considerations to keep in mind:\nThe GitHub Actions workflow checks the branch specified on line 6 for any changes. Ensure that you change it if you are using a branch other than master.\nThe Setup Hugo step (line 22) uses peaceiris/actions-hugo@v2 to install Hugo on the GitHub Actions virtual machine. The only important aspect to note is hugo-version, which must match the version of Hugo you are using.\nIn the next step, generate the static files by running the hugo –minify command. If you don’t want to minify your content, remove the –minify parameter. If you have a custom domain for your GitHub pages repository, create a file called CNAME with your domain name in it. This is because every time you run the hugo command, the contents of the ./public folder are replaced, including the CNAME file.\nIn the Deploy step, you must use the name of the deploy key that you generated earlier. Additionally, you must specify external_repository with the name of your GitHub pages repository. If you are using a branch other than main in your GitHub pages, change publish_branch.\nThe publish_dir is set to ./public by default.\nOnce you have made these changes, save the file, and you will see an action running under the Actions tab.\n","wordCount":"564","inLanguage":"en","datePublished":"2023-02-07T14:30:15+01:00","dateModified":"2023-02-07T14:30:15+01:00","author":{"@type":"Person","name":"Saeed"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://keyboardsmash.dev/posts/deploy-hugo-into-github-pages/"},"publisher":{"@type":"Organization","name":"Saeed's Blog","logo":{"@type":"ImageObject","url":"https://keyboardsmash.dev/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://keyboardsmash.dev accesskey=h title="Saeed's Blog (Alt + H)">Saeed's Blog</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu onscroll=menu_on_scroll()><li><a href=https://keyboardsmash.dev/about title=About><span>About</span></a></li><li><a href=https://keyboardsmash.dev/categories/ title=Categories><span>Categories</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Deploy Hugo on Github Pages with GitHub Actions</h1><div class=post-meta>February 7, 2023&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Saeed</div></header><div class=post-content><p>For the start, you will require two repositories: one to store your Hugo project, and the other to host the GitHub page with the static files generated by Hugo.</p><h3 id=configuring-github-pages>Configuring GitHub Pages<a hidden class=anchor aria-hidden=true href=#configuring-github-pages>#</a></h3><p>GitHub Pages is a straightforward solution for hosting a static website. You can find more information on how to set up your GitHub Pages in the relevant documentation.</p><p>To give GitHub Actions permission to write to your GitHub Pages repository, you will need to create a secret key pair. Run the following command in your terminal:</p><pre tabindex=0><code class=language-ssh data-lang=ssh>ssh-keygen -t rsa -b 4096 -C &#34;$(git config user.email)&#34; -f gh-pages -N &#34;&#34;
</code></pre><p>This will generate two files, <code>gh-pages</code> and <code>gh-pages.pub</code>, in your current directory.</p><p>Next, navigate to the settings in your GitHub Pages repository, select Deploy keys, and add a new deploy key. Copy and paste the contents of the gh-pages file generated in the previous step into the new key, and save it.
The GitHub Pages repository does not require any further configuration unless you want to confirm that your website is available before proceeding to the next step.</p><h3 id=config-hugo-repository>Config Hugo repository<a hidden class=anchor aria-hidden=true href=#config-hugo-repository>#</a></h3><p>In your repo that you keep your Hugo project, open the settings and from the sidebar select Secret and Variables -> Actions and add a new secret key. this time copy and past the content of <code>gh-pages.pub</code> and give it a name. Remember what name you’re giving it because we need it for the next step. I chose ACTION_DEPLY_KEY.</p><p>Now we create a file under <code>.github/workflow/hugo.yaml</code> and add the following content into it:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>GitHub Pages</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>on</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>push</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>branches</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>master </span> <span style=color:#75715e># Set a branch name to trigger deployment</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>pull_request</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>jobs</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>deploy</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-22.04</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>permissions</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>contents</span>: <span style=color:#ae81ff>write</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>concurrency</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>group</span>: <span style=color:#ae81ff>${{ github.workflow }}-${{ github.ref }}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>steps</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v3</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>submodules</span>: <span style=color:#66d9ef>true</span>  <span style=color:#75715e># Fetch Hugo themes (true OR recursive)</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>fetch-depth</span>: <span style=color:#ae81ff>0</span>    <span style=color:#75715e># Fetch all history for .GitInfo and .Lastmod</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Setup Hugo</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>peaceiris/actions-hugo@v2</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>hugo-version</span>: <span style=color:#e6db74>&#39;0.101.0&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Build</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>run</span>: <span style=color:#ae81ff>hugo --minify &amp;&amp; echo &#34;keyboardsmash.dev&#34; &gt; public/CNAME</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Deploy</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>peaceiris/actions-gh-pages@v3</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>deploy_key</span>: <span style=color:#ae81ff>${{ secrets.ACTIONS_DEPLOY_KEY }}</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>external_repository</span>: <span style=color:#ae81ff>smoqadam/keyboardsmash.github.io</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>publish_branch: main  # default</span>: <span style=color:#ae81ff>gh-pages</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>publish_dir</span>: <span style=color:#ae81ff>./public</span>
</span></span></code></pre></div><p>There are several key considerations to keep in mind:</p><ul><li><p>The GitHub Actions workflow checks the branch specified on line 6 for any changes. Ensure that you change it if you are using a branch other than master.</p></li><li><p>The Setup Hugo step (line 22) uses <code>peaceiris/actions-hugo@v2</code> to install Hugo on the GitHub Actions virtual machine. The only important aspect to note is hugo-version, which must match the version of Hugo you are using.</p></li><li><p>In the next step, generate the static files by running the hugo <code>–minify</code> command. If you don&rsquo;t want to minify your content, remove the &ndash;minify parameter. If you have a custom domain for your GitHub pages repository, create a file called <code>CNAME</code> with your domain name in it. This is because every time you run the hugo command, the contents of the ./public folder are replaced, including the <code>CNAME</code> file.</p></li><li><p>In the Deploy step, you must use the name of the deploy key that you generated earlier. Additionally, you must specify <code>external_repository</code> with the name of your GitHub pages repository.
If you are using a branch other than main in your GitHub pages, change <code>publish_branch</code>.</p></li><li><p>The <code>publish_dir</code> is set to <code>./public</code> by default.</p></li></ul><p>Once you have made these changes, save the file, and you will see an action running under the Actions tab.</p></div><footer class=post-footer></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://keyboardsmash.dev>Saeed's Blog</a></span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<span>Theme <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script defer src=/assets/js/highlight.min.e85ad0406048e8176e1c7661b25d5c69297ddfe41dc4124cf75ecb99a4f7b3d1.js integrity="sha256-6FrQQGBI6BduHHZhsl1caSl93+QdxBJM917LmaT3s9E=" onload=hljs.initHighlightingOnLoad()></script>
<script>window.onload=function(){localStorage.getItem("menu-scroll-position")&&(document.getElementById("menu").scrollLeft=localStorage.getItem("menu-scroll-position"))},document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})});var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById("menu").scrollLeft)}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>